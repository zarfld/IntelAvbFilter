{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "generate-headers",
			"type": "shell",
			"command": "python",
			"args": [
				"intel-ethernet-regs\\tools\\reggen.py",
				"intel-ethernet-regs\\devices\\i225.yaml",
				"intel-ethernet-regs\\gen"
			]
		},
		{
			"label": "generate-headers-i210-v37",
			"type": "shell",
			"command": "py",
			"args": [
				"-3",
				"intel-ethernet-regs\\tools\\reggen.py",
				"intel-ethernet-regs\\devices\\i210_v3_7.yaml",
				"intel-ethernet-regs\\gen"
			]
		},
		{
			"label": "generate-headers-i210-cscl",
			"type": "shell",
			"command": "py",
			"args": [
				"-3",
				"intel-ethernet-regs\\tools\\reggen.py",
				"intel-ethernet-regs\\devices\\i210_cscl_v1_8.yaml",
				"intel-ethernet-regs\\gen"
			]
		},
		{
			"label": "generate-headers-all",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-Command",
				"Get-ChildItem intel-ethernet-regs/devices -Filter *.yaml | ForEach-Object { py -3 intel-ethernet-regs/tools/reggen.py $_.FullName intel-ethernet-regs/gen }"
			]
		},
		{
			"label": "build-driver-release",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-Command",
				"$vswhere=\"${env:ProgramFiles(x86)}\\Microsoft Visual Studio\\Installer\\vswhere.exe\"; if(!(Test-Path $vswhere)){ Write-Error 'vswhere.exe not found'; exit 1 }; $vs=& $vswhere -latest -products * -requires Microsoft.Component.MSBuild -property installationPath; if(!$vs){ Write-Error 'VS not found'; exit 1 }; $msbuild=Join-Path $vs 'MSBuild\\Current\\Bin\\MSBuild.exe'; if(!(Test-Path $msbuild)){ Write-Error 'MSBuild not found'; exit 1 }; & $msbuild IntelAvbFilter.sln /t:Build /p:Configuration=Release /p:Platform=x64 /m"
			],
			"problemMatcher": [
				"$msCompile"
			],
			"group": {
				"kind": "build",
				"isDefault": true
			}
		},
		{
			"label": "build-driver-debug",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-Command",
				"$vswhere=\"${env:ProgramFiles(x86)}\\Microsoft Visual Studio\\Installer\\vswhere.exe\"; if(!(Test-Path $vswhere)){ Write-Error 'vswhere.exe not found'; exit 1 }; $vs=& $vswhere -latest -products * -requires Microsoft.Component.MSBuild -property installationPath; if(!$vs){ Write-Error 'VS not found'; exit 1 }; $msbuild=Join-Path $vs 'MSBuild\\Current\\Bin\\MSBuild.exe'; if(!(Test-Path $msbuild)){ Write-Error 'MSBuild not found'; exit 1 }; & $msbuild IntelAvbFilter.sln /t:Build /p:Configuration=Debug /p:Platform=x64 /m"
			],
			"problemMatcher": [
				"$msCompile"
			]
		},
		{
			"label": "rebuild-driver-release",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-Command",
				"$vswhere=\"${env:ProgramFiles(x86)}\\Microsoft Visual Studio\\Installer\\vswhere.exe\"; if(!(Test-Path $vswhere)){ Write-Error 'vswhere.exe not found'; exit 1 }; $vs=& $vswhere -latest -products * -requires Microsoft.Component.MSBuild -property installationPath; if(!$vs){ Write-Error 'VS not found'; exit 1 }; $msbuild=Join-Path $vs 'MSBuild\\Current\\Bin\\MSBuild.exe'; if(!(Test-Path $msbuild)){ Write-Error 'MSBuild not found'; exit 1 }; & $msbuild IntelAvbFilter.sln /t:Clean /t:Build /p:Configuration=Release /p:Platform=x64 /m"
			],
			"problemMatcher": [
				"$msCompile"
			]
		},
		{
			"label": "build-tests-nmake",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"tools/vs_compile.ps1",
				"-BuildCmd",
				"pushd tests\\integration\\avb; nmake -f avb_test.mak; popd"
			],
			"problemMatcher": [
				"$msCompile"
			],
			"group": "test"
		},
		{
			"label": "build-test-i210",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"tools/vs_compile.ps1",
				"-BuildCmd",
				"cl /nologo /W4 /Zi /I include /I external/intel_avb/lib /I intel-ethernet-regs/gen tests/integration/avb/avb_test_um.c /Fe:avb_test_i210_um.exe"
			],
			"presentation": {
				"reveal": "always",
				"panel": "dedicated",
				"clear": true
			},
			"problemMatcher": [
				"$msCompile"
			],
			"group": "test"
		},
		{
			"label": "build-test-i219",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"tools/vs_compile.ps1",
				"-BuildCmd",
				"cl /nologo /W4 /Zi tests/device_specific/i219/avb_test_i219.c /Fe:avb_test_i219.exe"
			],
			"problemMatcher": [
				"$msCompile"
			],
			"group": "test"
		},
		{
			"label": "build-quick-diagnostics",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"tools/vs_compile.ps1",
				"-BuildCmd",
				"cl /nologo /W4 /Zi tests/diagnostic/quick_diagnostics.c /Fe:quick_diagnostics.exe"
			],
			"problemMatcher": [
				"$msCompile"
			],
			"group": "test"
		},
		{
			"label": "run-i210-test",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-Command",
				"./avb_test_i210_um.exe"
			],
			"presentation": {
				"reveal": "always"
			},
			"dependsOn": [
				"build-test-i210"
			]
		},
		{
			"label": "run-i219-test",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-Command",
				"./avb_test_i219.exe"
			],
			"presentation": {
				"reveal": "always"
			},
			"dependsOn": [
				"build-test-i219"
			]
		},
		{
			"label": "run-quick-diagnostics",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-Command",
				"./quick_diagnostics.exe"
			],
			"presentation": {
				"reveal": "always"
			},
			"dependsOn": [
				"build-quick-diagnostics"
			]
		},
		{
			"label": "run-full-diagnostics",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-Command",
				"./tools/test/run_complete_diagnostics.bat"
			],
			"presentation": {
				"reveal": "always"
			},
			"problemMatcher": []
		},
		{
			"label": "sign-driver",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"Sign-Driver.ps1"
			],
			"problemMatcher": []
		},
		{
			"label": "build-tsauxc-toggle-test",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"tools/build_tsauxc_test.ps1"
			],
			"group": "test",
			"problemMatcher": []
		},
		{
			"label": "run-tsauxc-toggle-test",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-Command",
				"./tsauxc_toggle_test.exe"
			],
			"presentation": {
				"reveal": "always"
			},
			"dependsOn": [
				"build-tsauxc-toggle-test"
			],
			"problemMatcher": []
		},
		{
			"label": "build-ptp-clock-control-test",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"tools/vs_compile.ps1",
				"-BuildCmd",
				"cl /nologo /W4 /Zi /I include /I external/intel_avb/lib /I intel-ethernet-regs/gen tests/integration/ptp/ptp_clock_control_test.c /Fe:ptp_clock_control_test.exe"
			],
			"group": "test",
			"problemMatcher": []
		},
		{
			"label": "run-ptp-clock-control-test",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-Command",
				"./ptp_clock_control_test.exe"
			],
			"presentation": {
				"reveal": "always"
			},
			"dependsOn": [
				"build-ptp-clock-control-test"
			],
			"problemMatcher": []
		}
	]
}