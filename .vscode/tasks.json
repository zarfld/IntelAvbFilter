{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "generate-headers",
			"type": "shell",
			"command": "python",
			"args": [
				"intel-ethernet-regs\\tools\\reggen.py",
				"intel-ethernet-regs\\devices\\i225.yaml",
				"intel-ethernet-regs\\gen"
			]
		},
		{
			"label": "generate-headers-i210-v37",
			"type": "shell",
			"command": "py",
			"args": [
				"-3",
				"intel-ethernet-regs\\tools\\reggen.py",
				"intel-ethernet-regs\\devices\\i210_v3_7.yaml",
				"intel-ethernet-regs\\gen"
			]
		},
		{
			"label": "generate-headers-i210-cscl",
			"type": "shell",
			"command": "py",
			"args": [
				"-3",
				"intel-ethernet-regs\\tools\\reggen.py",
				"intel-ethernet-regs\\devices\\i210_cscl_v1_8.yaml",
				"intel-ethernet-regs\\gen"
			]
		},
		{
			"label": "generate-headers-all",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy","Bypass",
				"-Command",
				"Get-ChildItem intel-ethernet-regs/devices -Filter *.yaml | ForEach-Object { py -3 intel-ethernet-regs/tools/reggen.py $_.FullName intel-ethernet-regs/gen }"
			]
		},
		{
			"label": "build-driver-release",
			"type": "shell",
			"command": "msbuild",
			"args": [
				"IntelAvbFilter.sln",
				"/t:Build",
				"/p:Configuration=Release;Platform=x64",
				"/m"
			],
			"problemMatcher": ["$msCompile"],
			"group": {
				"kind": "build",
				"isDefault": true
			}
		},
		{
			"label": "build-driver-debug",
			"type": "shell",
			"command": "msbuild",
			"args": [
				"IntelAvbFilter.sln",
				"/t:Build",
				"/p:Configuration=Debug;Platform=x64",
				"/m"
			],
			"problemMatcher": ["$msCompile"]
		},
		{
			"label": "rebuild-driver-release",
			"type": "shell",
			"command": "msbuild",
			"args": [
				"IntelAvbFilter.sln",
				"/t:Clean;Build",
				"/p:Configuration=Release;Platform=x64",
				"/m"
			],
			"problemMatcher": ["$msCompile"]
		},
		{
			"label": "build-tests-nmake",
			"type": "shell",
			"command": "powershell",
			"args": [
				"-NoProfile","-ExecutionPolicy","Bypass","-Command",
				"$vswhere=\"${env:ProgramFiles(x86)}\\Microsoft Visual Studio\\Installer\\vswhere.exe\"; if(!(Test-Path $vswhere)){ Write-Error 'vswhere.exe not found'; exit 1 }; $vs=& $vswhere -latest -products * -requires Microsoft.VisualStudio.Component.VC.Tools.x86.x64 -property installationPath; if(!$vs){ Write-Error 'VS C++ tools not found'; exit 1 }; $vcvars=Join-Path $vs 'VC/ Auxiliary/Build/vcvars64.bat'.Replace(' /','/'); if(!(Test-Path $vcvars)){ Write-Error 'vcvars64.bat not found'; exit 1 }; cmd /c \"call \"$vcvars\" && nmake -f avb_test.mak\""
			],
			"problemMatcher": ["$msCompile"],
			"group": "test"
		},
		{
			"label": "build-test-i210",
			"type": "shell",
			"command": "powershell",
			"args": ["-NoProfile","-ExecutionPolicy","Bypass","-File","tools/vs_compile.ps1","-BuildCmd","cl /nologo /W4 /Zi avb_test_i210.c /Fe:avb_test_i210.exe"],
			"problemMatcher": ["$msCompile"],
			"group": "test"
		},
		{
			"label": "build-test-i219",
			"type": "shell",
			"command": "powershell",
			"args": ["-NoProfile","-ExecutionPolicy","Bypass","-File","tools/vs_compile.ps1","-BuildCmd","cl /nologo /W4 /Zi avb_test_i219.c /Fe:avb_test_i219.exe"],
			"problemMatcher": ["$msCompile"],
			"group": "test"
		},
		{
			"label": "build-quick-diagnostics",
			"type": "shell",
			"command": "powershell",
			"args": ["-NoProfile","-ExecutionPolicy","Bypass","-File","tools/vs_compile.ps1","-BuildCmd","cl /nologo /W4 /Zi quick_diagnostics.c /Fe:quick_diagnostics.exe"],
			"problemMatcher": ["$msCompile"],
			"group": "test"
		},
		{
			"label": "run-i210-test",
			"type": "shell",
			"command": "powershell",
			"args": ["-NoProfile","-ExecutionPolicy","Bypass","-Command","./avb_test_i210.exe"],
			"presentation": {"reveal":"always"},
			"dependsOn": ["build-test-i210"]
		},
		{
			"label": "run-i219-test",
			"type": "shell",
			"command": "powershell",
			"args": ["-NoProfile","-ExecutionPolicy","Bypass","-Command","./avb_test_i219.exe"],
			"presentation": {"reveal":"always"},
			"dependsOn": ["build-test-i219"]
		},
		{
			"label": "run-quick-diagnostics",
			"type": "shell",
			"command": "powershell",
			"args": ["-NoProfile","-ExecutionPolicy","Bypass","-Command","./quick_diagnostics.exe"],
			"presentation": {"reveal":"always"},
			"dependsOn": ["build-quick-diagnostics"]
		},
		{
			"label": "run-full-diagnostics",
			"type": "shell",
			"command": "powershell",
			"args": ["-NoProfile","-ExecutionPolicy","Bypass","-Command","./run_complete_diagnostics.bat"],
			"presentation": {"reveal":"always"}
		},
		{
			"label": "sign-driver",
			"type": "shell",
			"command": "powershell",
			"args": ["-NoProfile","-ExecutionPolicy","Bypass","-File","Sign-Driver.ps1"],
			"problemMatcher": []
		}
	]
}